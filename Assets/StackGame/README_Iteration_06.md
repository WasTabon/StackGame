# README — Iteration 6: Визуальный фидбек и эффекты

## Что изменилось

### Новые скрипты:
- **ScorePopup.cs** — при получении очков текст "+300" вылетает вверх от позиции удалённых слоёв с fade. При цепной реакции (chain ≥ 2) — увеличенный шрифт, оранжевый цвет, текст "x2". При chain ≥ 3 — красный, ещё крупнее.
- **ParticleSpawner.cs** — при удалении слоя спавнит цветные кубики-частицы которые разлетаются от позиции слоя. Цвета берёт из colorIndices слоя. Использует ParticleSystem с mesh-рендером кубов.
- **SpawnTimerUI.cs** — горизонтальная полоска вверху экрана показывающая прогресс до спавна следующего слоя. Заполняется слева направо. При > 75% заполнения мигает красным. Сбрасывается при спавне и при матче.

### Изменённые скрипты:
- **GameManager.cs** — интегрирует ScorePopup, ParticleSpawner, SpawnTimerUI. Сбрасывает таймер при матче (награда за активную игру). Обновляет timer bar каждый кадр.
- **StackChecker.cs** — добавлено событие `OnLayerRemoving(BlockLayer)` для партиклей перед удалением. `OnLayersRemoved` теперь передаёт `Vector3 avgPosition` для попапа.

## Как настроить

1. Заменить: GameManager.cs, StackChecker.cs
2. Добавить: ScorePopup.cs, ParticleSpawner.cs, SpawnTimerUI.cs, Editor/SetupIteration6.cs
3. Открыть Gameplay сцену
4. Меню: **STACK → Setup Visual Effects (Iteration 6)**

## Как тестировать

1. Запустить Gameplay
2. Полоска вверху постепенно заполняется — показывает когда упадёт новый слой
3. При > 75% полоска мигает красным
4. Сделать матч — от слоёв разлетаются цветные кубики, вверх вылетает "+200"
5. Цепная реакция — попап крупнее с "x2", "x3"
6. После матча таймер сбрасывается
